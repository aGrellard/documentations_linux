https://www.malekal.com/configurer-wake-on-lan-sur-linux/
https://connect.ed-diamond.com/Linux-Pratique/lp-066/reveillez-votre-pc-a-distance-avec-wakeonlan






Installez ethtool à partir de l'utilitaire de gestion de paquets de votre distribution. Par exemple avec APT pour des distributions de type Ubuntu, Debian ou Mint :
    sudo apt install ethtool

Afficher les interfaces réseaux avec l'adresse IP et l'adresse MAC avec la commande IP ou ifconfig :
    ip a

Pour vérifier le statut de l'interface réseau et si WOL est activé dessus :
    sudo ethtool <NIC>
        Par exemple si le nom de l'interface de la carte réseau est enbp3s0 :
            sudo ethtool enbp3s0
                On voit que l'interface wlPp2s0 (WiFi) ne supporte pas le WOL alors que l'interface enp3s0 (Ethernet) le supporte. Par contre, Wake-on est sur d, donc désactivé (disabled)

Pour activer le Wake on Lan sur la carte Ethernet :
    sudo ethtool -s <NIC> wol g


#########################################################
Configurer le Wake On LAN au démarrage de Linux

En modifiant la configuration réseau
    Editez le fichier de configuration /etc/network/interfaces (l'emplacement varie selon la distribution)
    Puis par exemple pour activer le WOL sur l'interface enbp3s0, il faut ajouter cette ligne :
        up ethtool -s enbp3s0 wol g
            Ce qui nous donne :
                # This file describes the network interfaces available on your system
                # and how to activate them. For more information, see interfaces(5).
                # The loopback network interface

                auto lo
                iface lo inet loopback
                # The primary network interface

                auto enbp3s0
                iface enbp3s0 inet static
                        address 192.168.1.100
                        netmask 255.255.255.0
                        gateway 192.168.1.1
                        up ethtool -s enbp3s0 wol g


avec wakeonlan
    Editez le fichier de configuration wol.service :
        sudo vim /etc/systemd/system/wol.service
            Modifiez de la sorte :
                [Unit]
                Description=Configure Wake On LAN

                [Service]
                Type=oneshot
                ExecStart=/sbin/ethtool -s INTERFACE wol g

                [Install]
                WantedBy=basic.target

Enfin activer le service avec systemctl :
    sudo systemctl daemon-reload
    sudo systemctl enable wol.service
    sudo systemctl start wol.service


#########################################################
Test et mise en route
    tcpdump udp and port 7


#########################################################
send magickpacket
    sudo wakeonlan -i 173.245.73.65 -p 7 00:1E:8C:31:F9:E6
    sudo wakeonlan -p 7 00:1E:8C:31:F9:E6



###MAC AMD
    00:1E:8C:31:F9:E6
